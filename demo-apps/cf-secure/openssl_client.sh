#! /bin/sh

echo "start openssl dtls client"

export CIPHERS_ECDSA=ECDHE-ECDSA-AES128-CCM8:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA384
export CIPHERS_PSK=PSK-AES128-CCM8:ECDHE-PSK-AES128-CBC-SHA256:PSK-AES128-GCM-SHA256:PSK-AES128-CBC-SHA256:PSK-AES128-CCM:PSK-AES256-CCM
export PSK=73656372657450534b
export CURVE="-curves prime256v1"


echo "ciphers ecdsa:" ${CIPHERS_ECDSA}
echo "ciphers psk  :" ${CIPHERS_PSK}

openssl s_client -dtls1_2 -connect 127.0.0.1:5684 -psk ${PSK} -no-CAfile ${CURVE} -cipher PSK-AES256-CCM
